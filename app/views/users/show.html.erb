<div class="container">
  <div id="show-container-padding">
    <div id="show-container">
      <div>
        <%= image_tag current_user.profile_picture.url(:version_profile_image), class: "profile-pic"%>
      </div>
      <div>
        <div class="profile-header-name bold">
          <%= current_user.full_name %>
        </div>
        <div class="profile-header">
          <%= current_user.current_position %>
          <% if (current_user.current_company != "") %>
          at <%= current_user.current_company %>
          <% end %>
        </div>
      </div>

      <div id="profile-content">
        <% User::TAG_CONTEXTS.each do |tag_context| %>
          <div>
            <%if (!current_user.send("#{tag_context}_list").empty?)%>
              <%= tag_context.to_s.humanize %>: <%= current_user.send("#{tag_context}_list") %>
            <% end %>
          </div>
        <% end %>

        <div>
          <h1 class="center">Collaborations</h1>
        </div>
        <div id="map-padding">
          <div id="map" class="map"></div>
        </div>
    </div>
  </div>
</div>

<script>
  handler = Gmaps.build('Google');
  handler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){
    markers = handler.addMarkers([
      {
        "lat": <%= current_user.latitude %>,
        "lng": <%= current_user.longitude %>,
        // "title": "<%= current_user.full_name %>"
        // "content": <img border="0" align="left" src="<%= current_user.profile_picture %>" >
        "infowindow": "<img border='0' margin-right='10px' width='50%' align='left' src='<%= current_user.profile_picture %>'>" + "<%= current_user.full_name %>" + '<br/>'+ "<%= current_user.current_position %>" + ' at ' + "<%= current_user.current_company %>"
      }
    ]);
    handler.bounds.extendWith(markers);
    handler.fitMapToBounds();
});
</script>
